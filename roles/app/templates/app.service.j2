[Unit]
Description=My App
After=network.target

[Service]
Type=simple
User=ecs-user
WorkingDirectory=/home/ecs-user/app
ExecStart=/usr/local/rvm/rubies/ruby-2.6.0/bin/bundle exec puma -C config/puma.rb
Environment="SECRET_KEY_BASE={{ SECRET_KEY_BASE }}"
Environment="RAILS_ENV={{ RAILS_ENV }}"
Environment="RAILS_LOG_TO_STDOUT={{ RAILS_LOG_TO_STDOUT }}"
Environment="DB_HOST={{ DB_HOST }}"
Environment="DB_PORT={{ DB_PORT }}"
Environment="DB_NAME={{ DB_NAME }}"
Environment="DB_USER={{ DB_USER }}"
Environment="DB_PASSWORD={{ DB_PASSWORD }}"
Restart=always

[Install]
WantedBy=multi-user.target
